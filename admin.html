<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Product JSON</title>
<style>
  body { font-family: Arial, sans-serif; padding: 2rem; background: #f9f9f9; }
  #login { max-width: 400px; margin: auto; text-align: center; }
  #editor { display: none; max-width: 800px; margin: auto; }
  textarea { width: 100%; height: 400px; font-family: monospace; font-size: 1rem; }
  button { margin-top: 1rem; padding: 0.5rem 1rem; font-size: 1rem; cursor: pointer; }
</style>
</head>
<body>
<div id="login">
  <h2>Admin Login</h2>
  <input type="password" id="password" placeholder="Enter password">
  <button onclick="checkPassword()">Login</button>
  <div id="login-msg" style="color:red; margin-top:1rem;"></div>
</div>

<div id="editor">
  <h2>Edit Products JSON</h2>
  <textarea id="json-data"></textarea>
  <button onclick="downloadJSON()">Download Updated JSON</button>
</div>

<script>
const PASSWORD = "admin123"; // change to your secure password

function checkPassword() {
  const input = document.getElementById('password').value;
  if(input === PASSWORD){
    document.getElementById('login').style.display = 'none';
    document.getElementById('editor').style.display = 'block';
    loadJSON();
  } else {
    document.getElementById('login-msg').textContent = 'Wrong password!';
  }
}

function loadJSON() {
  fetch('products.json')
    .then(res => res.text())
    .then(data => document.getElementById('json-data').value = data)
    .catch(err => document.getElementById('json-data').value = '{}');
}

function downloadJSON() {
  const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(document.getElementById('json-data').value);
  const dlAnchor = document.createElement('a');
  dlAnchor.setAttribute("href", dataStr);
  dlAnchor.setAttribute("download", "products.json");
  dlAnchor.click();
}
</script>
</body>
</html>
